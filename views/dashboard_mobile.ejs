<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>

  <body>
    <nav>
      <div class="nav-wrapper">
        <div class="container">

          <a href="#" class="brand-logo center">Let's start the GPA</a>
        </div>
        <!-- <ul id="nav-mobile" class="left hide-on-med-and-down">
          <li><a href="sass.html">Sass</a></li>
          <li><a href="badges.html">Components</a></li>
          <li><a href="collapsible.html">JavaScript</a></li>
        </ul> -->
      </div>
    </nav>
    <div class="container">
      <div class="main-user right-align">
        <h3><%= user.userName %></h3>
      </div>
      <% if (terms.length>0) { %>
        <ul class="collapsible expandable">
          <% terms.forEach(el => { %>
            <li>
              <div class="collapsible-header">
                <%= el.termName %>
              </div>
              <div class="collapsible-body">
                
                <% if (coursePerTerms[el._id]) {%>
                  <div id="term-class-grade"">
                      
                      <table class="term-table responsive-table highlight">
                              <thead>
                                  <tr>
                                      <th>Class name</th>
                                      <th>Grade (%)</th>
                                  </tr>
                              </thead>
                              <tbody class="term-table-info">
                                  <% coursePerTerms[el._id].forEach(cl => { %>
                                  <tr>
                                      <td><%= cl.courseName %></td>
                                      <td><%= cl.grade %></td>
                                  </tr>
                                  <% }) %>
                              </tbody>      
                      </table>
                  </div>
                <% } %>
                <div class="row">
                  <form class="col s12" action="/term/addCourse/<%= el._id %>" method="POST">
                    <div class="row">
                      <div class="type-info">
                        <input class="col s5" type="text" name="courseName" placeholder="Class name">
                        <input class="col s4" type="number" name="grade" placeholder="ex. 80">
                        <div class="col s3">
                          <!-- <button class="btn-floating btn waves-effect waves-light" id="add-info" type="submit" name="action-dashboard-submit">
                              <i class="material-icons">
                                  <input type="submit" value=""/>add
                              </i>
                          </button> -->
                          <button class="btn waves-effect waves-light" type="submit" name="action">add class
                          </button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
                <div class="icon" data-id='<%=el._id%>'>
                  <a class="del btn-floating btn-large waves-effect waves-light red"><i class="material-icons">delete</i></a>
                </div>
              </div>
            </li>
          <% }) %>
        </ul>
      <% } %>
      
      <form action="/dashboard/createTerm" method='POST'>
        <div class="file-field input-field">
          <button class="btn waves-effect waves-light" type="submit" name="action">add term
            <i class="material-icons right"></i>
          </button>
            <div class="file-path-wrapper">
                <input class="file-path validate" type="text" placeholder="Year 2 Term 1" name='termName'>
            </div>
        </div>
      </form>
      
    </div>
    <!--JavaScript at end of body for optimized loading-->
    <script src="/js/dashboard_mobile.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        var elem = document.querySelector('.collapsible.expandable');
        var instance = M.Collapsible.init(elem, {
          accordion: false
        });
    </script>
  </body>
</html>